{"@t":"2025-05-28T20:10:28.2828464Z","@mt":"Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.","@l":"Warning","EventId":{"Id":10400,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.SensitiveDataLoggingEnabledWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
{"@t":"2025-05-28T20:10:28.4491707Z","@mt":"The entity type '{entityType}' is an optional dependent using table sharing without any required non shared property that could be used to identify whether the entity exists. If all nullable properties contain a null value in database then an object instance won't be created in the query. Add a required property to create instances with null values for other properties or mark the incoming navigation as required to always create an instance.","@l":"Warning","entityType":"Address","EventId":{"Id":20606,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.OptionalDependentWithoutIdentifyingPropertyWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
{"@t":"2025-05-28T20:10:28.4756512Z","@mt":"No store type was specified for the decimal property '{property}' on entity type '{entityType}'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.","@l":"Warning","property":"Price","entityType":"Dish","EventId":{"Id":30000,"Name":"Microsoft.EntityFrameworkCore.Model.Validation.DecimalTypeDefaultWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Model.Validation"}
{"@t":"2025-05-28T20:10:29.4545461Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","elapsed":"50","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2025-05-28T20:10:29.9778739Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","elapsed":"13","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT CASE\r\n    WHEN EXISTS (\r\n        SELECT 1\r\n        FROM [Restaurants] AS [r]) THEN CAST(1 AS bit)\r\n    ELSE CAST(0 AS bit)\r\nEND","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2025-05-28T20:10:30.0089274Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT CASE\r\n    WHEN EXISTS (\r\n        SELECT 1\r\n        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)\r\n    ELSE CAST(0 AS bit)\r\nEND","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2025-05-28T20:10:33.9086751Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["10.1149"],"@tr":"1c81b83afd527ac15bc05451e12ef8a2","@sp":"fb47e1b4b1b7fa31","RequestMethod":"GET","RequestPath":"/swagger","StatusCode":301,"Elapsed":10.1149,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.0901203Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["111.6190"],"@tr":"87b6450507a97b9d9e7f0c07ca7ba011","@sp":"65d95f249f149efb","RequestMethod":"GET","RequestPath":"/swagger/index.html","StatusCode":200,"Elapsed":111.619,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.1881614Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["21.8399"],"@tr":"edcdd98f9c66b9b5faf29072c0463196","@sp":"f77fd56b40a4ce16","RequestMethod":"GET","RequestPath":"/swagger/index.js","StatusCode":200,"Elapsed":21.8399,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.2386038Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["72.2355"],"@tr":"524202d932d686cca5e965f954ab98f9","@sp":"aa50e0614b58f637","RequestMethod":"GET","RequestPath":"/swagger/index.css","StatusCode":200,"Elapsed":72.2355,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.5545695Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["388.1810"],"@tr":"71616d28f12cec1dbd7037508ad9ff90","@sp":"d29ad4aa106fc7d8","RequestMethod":"GET","RequestPath":"/swagger/swagger-ui-standalone-preset.js","StatusCode":200,"Elapsed":388.181,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.5549443Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["388.6547"],"@tr":"5ff1702fd6b5ea4977166fcc9b02b4b3","@sp":"a19bce990de7025a","RequestMethod":"GET","RequestPath":"/swagger/swagger-ui.css","StatusCode":200,"Elapsed":388.6547,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:34.6907435Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["524.4014"],"@tr":"038c22b400bc74bfcbf99e407ca27ad0","@sp":"f3bbddac9df411bf","RequestMethod":"GET","RequestPath":"/swagger/swagger-ui-bundle.js","StatusCode":200,"Elapsed":524.4014,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:10:35.2422158Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["50.2321"],"@tr":"7a86299be2e1d3ea9cedd2752bcc3090","@sp":"60e3c0842d480c0f","RequestMethod":"GET","RequestPath":"/swagger/v1/swagger.json","StatusCode":200,"Elapsed":50.2321,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:12:23.8523708Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.1366605Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","elapsed":"63","parameters":"@__normalizedUserName_0='ADMIN@GMAIL.COM' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nationality], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]\r\nFROM [AspNetUsers] AS [a]\r\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.4868393Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","elapsed":"5","parameters":"@__user_Id_0='7cca6ab1-42a1-44b8-bcf6-0d79ff56f824' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]\r\nFROM [AspNetUserClaims] AS [a]\r\nWHERE [a].[UserId] = @__user_Id_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.5356874Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","elapsed":"5","parameters":"@__userId_0='7cca6ab1-42a1-44b8-bcf6-0d79ff56f824' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT [a0].[Name]\r\nFROM [AspNetUserRoles] AS [a]\r\nINNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]\r\nWHERE [a].[UserId] = @__userId_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.5651457Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","elapsed":"7","parameters":"@__normalizedName_0='ADMIN' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]\r\nFROM [AspNetRoles] AS [a]\r\nWHERE [a].[NormalizedName] = @__normalizedName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.6020406Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","elapsed":"4","parameters":"@__role_Id_0='79634f62-a24a-450b-934b-0af29bf939e4' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT [a].[ClaimType], [a].[ClaimValue]\r\nFROM [AspNetRoleClaims] AS [a]\r\nWHERE [a].[RoleId] = @__role_Id_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNCU4EP47NF1:00000004","RequestPath":"/api/identity/login","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:12:24.6303787Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["780.6476"],"@tr":"06b1b50b8813d24c0646ca33465bef1b","@sp":"9d4b3b403a621531","RequestMethod":"POST","RequestPath":"/api/identity/login","StatusCode":200,"Elapsed":780.6476,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:13:21.5227649Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["175.3918"],"@tr":"a4a16c3a7d28549859323b8b6a6fdfe8","@sp":"284791e85454cc81","RequestMethod":"POST","RequestPath":"/api/identity/userRole","StatusCode":400,"Elapsed":175.3918,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:16:05.2983723Z","@mt":"Asignado rol al usuario: {@Request}","@tr":"508f793e4fb17b4e65ce94bdd175be0d","@sp":"baa3b1c9ace68072","Request":{"UserEmail":"string","RoleName":"string","$type":"AssignUserRoleCommand"},"SourceContext":"Restaurants.Application.Users.Commands.AssignUserRole.AssignUserRoleCommandHandler","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000006","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:16:05.4144241Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"508f793e4fb17b4e65ce94bdd175be0d","@sp":"baa3b1c9ace68072","elapsed":"8","parameters":"@__normalizedEmail_0='STRING' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nationality], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]\r\nFROM [AspNetUsers] AS [a]\r\nWHERE [a].[NormalizedEmail] = @__normalizedEmail_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000006","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:16:05.6125964Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["27033.9417"],"@l":"Error","@x":"Restaurants.Domain.Exceptions.NotFoundException: User con id string no existe\r\n   at Restaurants.Application.Users.Commands.AssignUserRole.AssignUserRoleCommandHandler.Handle(AssignUserRoleCommand request, CancellationToken cancellationToken) in C:\\Users\\UserNew\\Documents\\Test\\Net8_RestaurantAPI\\Restaurant.Aplication\\Users\\Commands\\AssignUserRole\\AssignUserRoleCommandHandler.cs:line 18\r\n   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()\r\n--- End of stack trace from previous location ---\r\n   at Restaurants.API.Controllers.IdentityController.AssignUserRole(AssignUserRoleCommand updateUserCommand) in C:\\Users\\UserNew\\Documents\\Test\\Net8_RestaurantAPI\\Restaurants.API\\Controllers\\IdentityController.cs:line 26\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","@tr":"508f793e4fb17b4e65ce94bdd175be0d","@sp":"baa3b1c9ace68072","RequestMethod":"POST","RequestPath":"/api/identity/userRole","StatusCode":500,"Elapsed":27033.9417,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:16:05.9265703Z","@mt":"User con id string no existe","@l":"Warning","@tr":"508f793e4fb17b4e65ce94bdd175be0d","@sp":"baa3b1c9ace68072","SourceContext":"Restaurants.API.Middlewares.ErrorHandlingMiddleware","RequestId":"0HNCU4EP47NF1:00000006","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:16:46.7922551Z","@mt":"Asignado rol al usuario: {@Request}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","Request":{"UserEmail":"test@gmail.com","RoleName":"User","$type":"AssignUserRoleCommand"},"SourceContext":"Restaurants.Application.Users.Commands.AssignUserRole.AssignUserRoleCommandHandler","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:00.5590993Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"6","parameters":"@__normalizedEmail_0='TEST@GMAIL.COM' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nationality], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]\r\nFROM [AspNetUsers] AS [a]\r\nWHERE [a].[NormalizedEmail] = @__normalizedEmail_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:06.0846509Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"4","parameters":"@__normalizedName_0='USER' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]\r\nFROM [AspNetRoles] AS [a]\r\nWHERE [a].[NormalizedName] = @__normalizedName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.3515478Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"2","parameters":"@__normalizedRoleName_0='USER' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]\r\nFROM [AspNetRoles] AS [a]\r\nWHERE [a].[NormalizedName] = @__normalizedRoleName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.4101947Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"3","parameters":"@__p_0='b70b5d44-e18b-4e01-ab0e-7fc2c2db5706' (Size = 450), @__p_1='b0c966f1-7ff5-4e71-b360-24ff4bfb276d' (Size = 450)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(1) [a].[UserId], [a].[RoleId]\r\nFROM [AspNetUserRoles] AS [a]\r\nWHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.4233253Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"1","parameters":"@__normalizedRoleName_0='USER' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]\r\nFROM [AspNetRoles] AS [a]\r\nWHERE [a].[NormalizedName] = @__normalizedRoleName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.4704183Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"3","parameters":"@__normalizedUserName_0='TEST@GMAIL.COM' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nationality], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]\r\nFROM [AspNetUsers] AS [a]\r\nWHERE [a].[NormalizedUserName] = @__normalizedUserName_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.6558459Z","@mt":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","elapsed":"14","parameters":"@p0='b0c966f1-7ff5-4e71-b360-24ff4bfb276d' (Nullable = false) (Size = 450), @p1='b70b5d44-e18b-4e01-ab0e-7fc2c2db5706' (Nullable = false) (Size = 450), @p18='b70b5d44-e18b-4e01-ab0e-7fc2c2db5706' (Nullable = false) (Size = 450), @p2='0', @p3='3c68ca59-1db4-4073-bbe1-235cabf190bb' (Size = 4000), @p19='75c0d954-9151-4fd3-b770-9918ed082249' (Size = 4000), @p4='05/26/2025' (DbType = Date), @p5='test@gmail.com' (Size = 256), @p6='False', @p7='True', @p8=NULL (DbType = DateTimeOffset), @p9='Italiano' (Size = 4000), @p10='TEST@GMAIL.COM' (Size = 256), @p11='TEST@GMAIL.COM' (Size = 256), @p12='AQAAAAIAAYagAAAAEMOroMwO+2815v+kVZ8Dte4wTfg6WXnx6mF/BBsX1EgfmAXAkXMME9yHhcGrXZzswQ==' (Size = 4000), @p13=NULL (Size = 4000), @p14='False', @p15='CLWU5DCXVTDTVFUG6XOASVZTUHWN6NMQ' (Size = 4000), @p16='False', @p17='test@gmail.com' (Size = 256)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SET NOCOUNT ON;\r\nINSERT INTO [AspNetUserRoles] ([RoleId], [UserId])\r\nVALUES (@p0, @p1);\r\nUPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [DateOfBirth] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [Nationality] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17\r\nOUTPUT 1\r\nWHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"18902a97-cc60-4971-a68f-7d7a5cdfd766","ActionName":"Restaurants.API.Controllers.IdentityController.AssignUserRole (Restaurants.API)","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
{"@t":"2025-05-28T20:17:13.6924045Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["31814.8543"],"@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","RequestMethod":"POST","RequestPath":"/api/identity/userRole","StatusCode":204,"Elapsed":31814.8543,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware"}
{"@t":"2025-05-28T20:17:13.6997089Z","@mt":"La solicitud [{Verb}] a {Path} tomó {Time} ms","@tr":"edfb22c375528d629cd0b2c18b5081f7","@sp":"39ce8f1ea06e59c5","Verb":"POST","Path":"/api/identity/userRole","Time":31821,"SourceContext":"Restaurants.API.Middlewares.RequestTimeLoggingMiddleware","RequestId":"0HNCU4EP47NF1:00000007","RequestPath":"/api/identity/userRole","ConnectionId":"0HNCU4EP47NF1"}
